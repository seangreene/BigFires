<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>California Big Fires</title>

		<style type="text/css">
			svg {

			}
			.bar {
			}
			.bar:hover {
				opacity: .6;
			}
			.axis path,
			.axis line {
			    fill: none;
			    stroke: black;
			    shape-rendering: crispEdges;
			}
			.axis text {
			    font-family: arial;
			    font-size: 11px;
			}
			.label {
				position:relative;
				color: black;
				font-size: 15px;
				z-index:10;
			}
			.axis path,
			.axis line {
				fill:none;
				stroke: #000;
				shape-rendering: crispEdges;
			}

			.x axis text{
	  			font-family: arial;
	   			font-size: 10px;
	   			text-anchor: middle;
			}	
			.x axis line{
				stroke: #fff;
				stroke-width: 3px;
				fill: none;
			}
			.y axis text{
	  			font-family: arial;
	   			font-size: 10px;
	   			text-anchor: start;
			}	
			.y axis line{
				stroke: #fff;
				stroke-width: 3px;
				fill: none;
			}
			.recent{
				fill: rgb(255, 19, 0);
			}
			.past{
				fill: rgb(255,137,64);
			}
			.year-label{
				font-family: sans-serif;
			    font-size: 11px;
			}

			/* tooltip */
			.d3-tip {
			  font-family: arial;
			  font-size: 11px;
			  line-height: 1;
			  font-weight: bold;
			  padding: 12px;
			  background: rgba(0, 0, 0, 0.8);
			  color: #fff;
			  border-radius: 2px;
			}

			/* Creates a small triangle extender for the tooltip */
			.d3-tip:after {
			  box-sizing: border-box;
			  display: inline;
			  font-size: 10px;
			  width: 100%;
			  line-height: 1;
			  color: rgba(0, 0, 0, 0.8);
			  content: "\25BC";
			  position: absolute;
			  text-align: center;
			}

			/* Style northward tooltips differently */
			.d3-tip.n:after {
			  margin: -1px 0 0 0;
			  top: 100%;
			  left: 0;
			}
		</style>
		
        <script src="js/d3.min.js" charset="utf-8"></script>
        <script src="js/d3.tip.js"></script>


    </head>
    <body>		
        <script type="text/javascript">
		var margin = {top: 30, right: 20, bottom: 10, left: 50};

		var width = 700 - margin.left - margin.right,
		height = 350 - margin.top - margin.bottom,
		barPadding = 2;

		var svg = d3.select("body")
					.append("svg")
					.attr("width", "100%")
					.attr("height", "100%")
					.attr("viewBox", "0 0 " + (width + margin.left + margin.right) + " " + (height + margin.top + margin.bottom))
					.attr("preserveAspectRatio", "xMidYMin")
					.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");


		d3.csv("firedata.csv", function(err, fires) {
			
			fires.forEach(function(d) {
			    d.ACRES = +d.ACRES;
			    d.RANK = +d.RANK;
			    d.YEAR = +d.YEAR;
			});

			fires.sort(function(a,b) {
				return a.ACRES - b.ACRES;
			});
			
			var y = d3.scale.linear()
				.domain([0,273246])
				.range([height,0]);

			
			var x = d3.scale.linear()
				.domain([0, fires.length])
				.range([0,width]);			

			//tooltip

			var tip = d3.tip()
				.attr('class','d3-tip')
				.offset([20,0])
				.html(function(d) {
					return "<span>" + d.NAME + " Fire:<br />" + d.ACRES2 + " acres<br />" + d.COUNTY + " County, " + d.MONTH + " " + d.YEAR + "</span>";
				})

			svg.call(tip);

			var bar = svg.selectAll(".bar")
				.data(fires)
			.enter().append("rect")
				.attr("width", (width/fires.length) - barPadding)
				.attr("height", function(d) {return height - y(d.ACRES); })
				.attr("y", function(d) { return y(d.ACRES);  })
				.attr("x", function(d,i) { return i * ( width/fires.length);})
				.attr("class", "bar")
				.classed("recent", function(d){ return d.YEAR >=2000 })
				.classed("past", function(d){ return d.YEAR <=1999 })
			    .on('mouseover', tip.show)
			    .on('mouseout', tip.hide);

			
			var xAxis = d3.svg.axis()
				.ticks(0)
				.scale(x)
				.orient("bottom");

			svg.append("g")
				.attr("class", "x axis")
				.attr("transform", "translate( 0, " + height + ")" )
				.call(xAxis);

			


			//CREATING Y AXIS
			var yAxis = d3.svg.axis()
				.scale(y)
				.orient("left")
				.ticks(8);

			svg.append("g")
				.attr("class", "y axis")
				.attr("transform", "translate( 0, 0)")
				.call(yAxis);

		});

					
        </script>

    </body>
</html>